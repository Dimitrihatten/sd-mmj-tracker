<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SD MMJ Tracker - South Dakota Medical Marijuana Allotment System</title>
    <meta name="description" content="Track your South Dakota medical marijuana allotments, purchase history, and find dispensaries. Professional MMJ card management for SD patients.">
    <meta name="keywords" content="South Dakota MMJ, medical marijuana tracker, SD cannabis, allotment tracking, dispensary finder">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://sdmmjtracker.com/">
    <meta property="og:title" content="SD MMJ Tracker - Medical Marijuana Allotment System">
    <meta property="og:description" content="Professional medical marijuana tracking for South Dakota patients. Track allotments, history, and find dispensaries.">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üåø</text></svg>">
    
    <!-- CSS Libraries -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Stripe.js -->
    <script src="https://js.stripe.com/v3/"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YOUR_ANALYTICS_ID"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-YOUR_ANALYTICS_ID');
    </script>
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        .pricing-card {
            transition: all 0.3s ease;
        }
        
        .pricing-card:hover {
            transform: scale(1.02);
        }
        
        .allotment-progress {
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .modal {
            transition: opacity 0.25s ease;
        }
        
        .modal.show {
            opacity: 1;
            visibility: visible;
        }
        
        .modal.hide {
            opacity: 0;
            visibility: hidden;
        }
        
        .payment-message {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            max-width: 400px;
        }
        
        @media (max-width: 768px) {
            .payment-message {
                top: 10px;
                left: 10px;
                right: 10px;
                max-width: none;
            }
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideInMobile {
            from {
                transform: translateY(-100%);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-radius: 50%;
            border-top-color: #3498db;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .debug-panel {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 12px;
            border-radius: 8px;
            font-size: 12px;
            font-family: monospace;
            z-index: 999;
            max-width: 300px;
        }
        
        .debug-panel.hidden {
            display: none;
        }
    </style>
</head>

<body class="bg-gray-50">
    <!-- Debug Panel -->
    <div id="debug-panel" class="debug-panel">
        <div style="font-weight: bold; margin-bottom: 8px;">üîß Debug Info</div>
        <div id="debug-content">
            <div>‚úÖ Page loaded successfully</div>
            <div id="stripe-status">‚è≥ Checking Stripe...</div>
            <div id="payments-status">‚è≥ Checking payments...</div>
            <div style="margin-top: 8px;">
                <button onclick="testSuccessMessage()" style="background: #10B981; color: white; border: none; padding: 4px 8px; margin-right: 4px; border-radius: 4px; cursor: pointer; font-size: 11px;">Test Success</button>
                <button onclick="testCancelMessage()" style="background: #F59E0B; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 11px;">Test Cancel</button>
            </div>
            <div style="margin-top: 8px;">
                <button onclick="toggleDebugPanel()" style="background: #EF4444; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 11px;">Hide Debug</button>
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <span class="text-2xl font-bold text-green-600">üåø SD MMJ Tracker</span>
                    </div>
                    <div class="hidden md:block">
                        <div class="ml-10 flex items-baseline space-x-4">
                            <a href="#home" class="text-gray-900 hover:text-green-600 px-3 py-2 rounded-md text-sm font-medium">Home</a>
                            <a href="#features" class="text-gray-500 hover:text-green-600 px-3 py-2 rounded-md text-sm font-medium">Features</a>
                            <a href="#pricing" class="text-gray-500 hover:text-green-600 px-3 py-2 rounded-md text-sm font-medium">Pricing</a>
                            <a href="#contact" class="text-gray-500 hover:text-green-600 px-3 py-2 rounded-md text-sm font-medium">Contact</a>
                        </div>
                    </div>
                </div>
                <div class="hidden md:block">
                    <div class="ml-4 flex items-center md:ml-6">
                        <button onclick="showLoginModal()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm font-medium mr-2 transition duration-300">
                            <i class="fas fa-sign-in-alt mr-1"></i>Login
                        </button>
                        <button onclick="scrollToPricing()" class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-md text-sm font-medium transition duration-300">
                            <i class="fas fa-crown mr-1"></i>Get Premium
                        </button>
                    </div>
                </div>
                <div class="md:hidden">
                    <button onclick="toggleMobileMenu()" class="text-gray-500 hover:text-green-600">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Mobile menu -->
        <div id="mobile-menu" class="md:hidden hidden">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3 bg-white border-t">
                <a href="#home" class="text-gray-900 block px-3 py-2 rounded-md text-base font-medium">Home</a>
                <a href="#features" class="text-gray-500 block px-3 py-2 rounded-md text-base font-medium">Features</a>
                <a href="#pricing" class="text-gray-500 block px-3 py-2 rounded-md text-base font-medium">Pricing</a>
                <a href="#contact" class="text-gray-500 block px-3 py-2 rounded-md text-base font-medium">Contact</a>
                <button onclick="showLoginModal()" class="w-full text-left bg-green-600 text-white block px-3 py-2 rounded-md text-base font-medium mt-2">
                    Login
                </button>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="gradient-bg text-white py-20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center">
                <h1 class="text-4xl md:text-6xl font-bold mb-6">
                    Track Your MMJ Allotments
                    <span class="block text-yellow-300">in South Dakota</span>
                </h1>
                <p class="text-xl md:text-2xl mb-8 text-gray-200 max-w-3xl mx-auto">
                    Professional medical marijuana tracking system for South Dakota patients. 
                    Monitor your allotments, view purchase history, and find dispensaries.
                </p>
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <button onclick="showLoginModal()" class="bg-white text-purple-600 hover:bg-gray-100 px-8 py-4 rounded-lg text-lg font-semibold transition duration-300 transform hover:scale-105">
                        <i class="fas fa-sign-in-alt mr-2"></i>Access Your Account
                    </button>
                    <button onclick="scrollToPricing()" class="border-2 border-white text-white hover:bg-white hover:text-purple-600 px-8 py-4 rounded-lg text-lg font-semibold transition duration-300 transform hover:scale-105">
                        <i class="fas fa-crown mr-2"></i>Get Premium
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section id="features" class="py-20 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
                    Everything You Need to Track Your MMJ
                </h2>
                <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                    Comprehensive tools designed specifically for South Dakota medical marijuana patients
                </p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="bg-white p-6 rounded-xl shadow-lg card-hover border border-gray-100">
                    <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mb-4">
                        <i class="fas fa-chart-line text-green-600 text-xl"></i>
                    </div>
                    <h3 class="text-xl font-semibold text-gray-900 mb-2">Real-time Allotment Tracking</h3>
                    <p class="text-gray-600">Monitor your flower, concentrate, and edible limits with real-time updates and remaining balances.</p>
                </div>
                
                <div class="bg-white p-6 rounded-xl shadow-lg card-hover border border-gray-100">
                    <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-4">
                        <i class="fas fa-history text-blue-600 text-xl"></i>
                    </div>
                    <h3 class="text-xl font-semibold text-gray-900 mb-2">Purchase History</h3>
                    <p class="text-gray-600">Complete transaction history with dispensary details, products, and spending analytics.</p>
                </div>
                
                <div class="bg-white p-6 rounded-xl shadow-lg card-hover border border-gray-100">
                    <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mb-4">
                        <i class="fas fa-store text-purple-600 text-xl"></i>
                    </div>
                    <h3 class="text-xl font-semibold text-gray-900 mb-2">Dispensary Finder</h3>
                    <p class="text-gray-600">Find nearby dispensaries with hours, contact info, and user reviews.</p>
                </div>
                
                <div class="bg-white p-6 rounded-xl shadow-lg card-hover border border-gray-100">
                    <div class="w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center mb-4">
                        <i class="fas fa-file-export text-yellow-600 text-xl"></i>
                    </div>
                    <h3 class="text-xl font-semibold text-gray-900 mb-2">Export & Reports</h3>
                    <p class="text-gray-600">Export your data for tax purposes and generate detailed usage reports.</p>
                </div>
                
                <div class="bg-white p-6 rounded-xl shadow-lg card-hover border border-gray-100">
                    <div class="w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center mb-4">
                        <i class="fas fa-bell text-red-600 text-xl"></i>
                    </div>
                    <h3 class="text-xl font-semibold text-gray-900 mb-2">Smart Notifications</h3>
                    <p class="text-gray-600">Get alerts when allotments are running low or when it's time for renewal.</p>
                </div>
                
                <div class="bg-white p-6 rounded-xl shadow-lg card-hover border border-gray-100">
                    <div class="w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center mb-4">
                        <i class="fas fa-shield-alt text-indigo-600 text-xl"></i>
                    </div>
                    <h3 class="text-xl font-semibold text-gray-900 mb-2">HIPAA Compliant</h3>
                    <p class="text-gray-600">Your medical information is protected with bank-level security and encryption.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Demo Dashboard Section -->
    <section class="py-20 bg-gray-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
                    See Your Data in Action
                </h2>
                <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                    Experience how easy it is to track your medical marijuana usage with our intuitive dashboard
                </p>
            </div>
            
            <!-- Demo Login Form -->
            <div class="max-w-md mx-auto bg-white rounded-xl shadow-lg p-8 mb-12">
                <div class="text-center mb-6">
                    <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-cannabis text-green-600 text-2xl"></i>
                    </div>
                    <h3 class="text-2xl font-semibold text-gray-900">MMJ Portal Access</h3>
                    <p class="text-gray-600 mt-2">Enter your medical marijuana card information</p>
                </div>
                
                <form id="demo-login-form" class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-id-card mr-2 text-gray-400"></i>MMJ Card Number
                        </label>
                        <input type="text" id="demo-card-number" placeholder="SD-MMJ-123456" 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition duration-300">
                        <p class="text-xs text-gray-500 mt-1">Try: SD-MMJ-001234 for demo</p>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-calendar mr-2 text-gray-400"></i>Date of Birth
                        </label>
                        <input type="date" id="demo-dob" 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition duration-300">
                    </div>
                    
                    <button type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-lg font-semibold transition duration-300 transform hover:scale-105">
                        <i class="fas fa-sign-in-alt mr-2"></i>Access My Account
                    </button>
                </form>
                
                <p class="text-center text-sm text-gray-500 mt-4">
                    Need help? Contact <a href="/cdn-cgi/l/email-protection#55262025253a272115263138383f212734363e30277b363a38" class="text-green-600 hover:underline"><span class="__cf_email__" data-cfemail="d0a3a5a0a0bfa2a490a3b4bdbdbaa4a2b1b3bbb5a2feb3bfbd">[email&#160;protected]</span></a>
                </p>
            </div>
            
            <!-- Demo Dashboard -->
            <div id="demo-dashboard" class="hidden">
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8">
                    <!-- Current Allotments -->
                    <div class="lg:col-span-2 bg-white rounded-xl shadow-lg p-6">
                        <h3 class="text-xl font-semibold text-gray-900 mb-6">Current Month Allotments</h3>
                        
                        <div class="space-y-6">
                            <div>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-sm font-medium text-gray-700">Flower</span>
                                    <span class="text-sm text-gray-500">1.8 / 3.0 oz</span>
                                </div>
                                <div class="allotment-progress bg-gray-200">
                                    <div class="h-full bg-green-500 transition-all duration-500" style="width: 60%"></div>
                                </div>
                                <p class="text-xs text-gray-500 mt-1">1.2 oz remaining</p>
                            </div>
                            
                            <div>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-sm font-medium text-gray-700">Concentrates</span>
                                    <span class="text-sm text-gray-500">0.6 / 1.0 oz</span>
                                </div>
                                <div class="allotment-progress bg-gray-200">
                                    <div class="h-full bg-blue-500 transition-all duration-500" style="width: 60%"></div>
                                </div>
                                <p class="text-xs text-gray-500 mt-1">0.4 oz remaining</p>
                            </div>
                            
                            <div>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-sm font-medium text-gray-700">Edibles</span>
                                    <span class="text-sm text-gray-500">45,000 / 100,000 mg</span>
                                </div>
                                <div class="allotment-progress bg-gray-200">
                                    <div class="h-full bg-purple-500 transition-all duration-500" style="width: 45%"></div>
                                </div>
                                <p class="text-xs text-gray-500 mt-1">55,000 mg remaining</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Quick Stats -->
                    <div class="space-y-4">
                        <div class="bg-white rounded-xl shadow-lg p-6 card-hover">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-gray-600">This Month Spent</p>
                                    <p class="text-2xl font-bold text-gray-900">$342.50</p>
                                </div>
                                <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-dollar-sign text-green-600"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-xl shadow-lg p-6 card-hover">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-gray-600">Dispensary Visits</p>
                                    <p class="text-2xl font-bold text-gray-900">8</p>
                                </div>
                                <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-store text-blue-600"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-xl shadow-lg p-6 card-hover">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-gray-600">Days Until Renewal</p>
                                    <p class="text-2xl font-bold text-gray-900">12</p>
                                </div>
                                <div class="w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-calendar text-yellow-600"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Recent Transactions -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-xl font-semibold text-gray-900 mb-6">Recent Transactions</h3>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead>
                                <tr class="border-b border-gray-200">
                                    <th class="text-left py-3 px-4 font-medium text-gray-700">Date</th>
                                    <th class="text-left py-3 px-4 font-medium text-gray-700">Dispensary</th>
                                    <th class="text-left py-3 px-4 font-medium text-gray-700">Items</th>
                                    <th class="text-left py-3 px-4 font-medium text-gray-700">Amount</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200">
                                <tr class="hover:bg-gray-50 transition duration-300">
                                    <td class="py-3 px-4 text-sm text-gray-900">Dec 15, 2024</td>
                                    <td class="py-3 px-4 text-sm text-gray-900">Green Hills Dispensary</td>
                                    <td class="py-3 px-4 text-sm text-gray-600">Northern Lights (3.5g), Gummies (100mg)</td>
                                    <td class="py-3 px-4 text-sm text-green-600 font-semibold">$67.50</td>
                                </tr>
                                <tr class="hover:bg-gray-50 transition duration-300">
                                    <td class="py-3 px-4 text-sm text-gray-900">Dec 12, 2024</td>
                                    <td class="py-3 px-4 text-sm text-gray-900">Prairie Cannabis Co.</td>
                                    <td class="py-3 px-4 text-sm text-gray-600">Concentrate (0.5g), Tincture (30ml)</td>
                                    <td class="py-3 px-4 text-sm text-green-600 font-semibold">$89.00</td>
                                </tr>
                                <tr class="hover:bg-gray-50 transition duration-300">
                                    <td class="py-3 px-4 text-sm text-gray-900">Dec 8, 2024</td>
                                    <td class="py-3 px-4 text-sm text-gray-900">Dakota Wellness</td>
                                    <td class="py-3 px-4 text-sm text-gray-600">Blue Dream (7g), Topical Cream</td>
                                    <td class="py-3 px-4 text-sm text-green-600 font-semibold">$125.00</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Pricing Section -->
    <section id="pricing" class="py-20 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
                    Choose Your Plan
                </h2>
                <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                    Start with our free basic tracking, or upgrade for advanced features and analytics
                </p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto">
                <!-- Basic Plan -->
                <div class="bg-white border-2 border-gray-200 rounded-xl p-8 pricing-card relative">
                    <div class="text-center">
                        <h3 class="text-2xl font-semibold text-gray-900 mb-4">Basic</h3>
                        <div class="text-4xl font-bold text-gray-900 mb-2">Free</div>
                        <p class="text-gray-600 mb-6">Perfect for getting started</p>
                        
                        <ul class="text-left space-y-3 mb-8">
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-3"></i>
                                <span class="text-gray-600">Basic allotment tracking</span>
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-3"></i>
                                <span class="text-gray-600">Last 10 transactions</span>
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-3"></i>
                                <span class="text-gray-600">Dispensary finder</span>
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-3"></i>
                                <span class="text-gray-600">Mobile app access</span>
                            </li>
                        </ul>
                        
                        <button onclick="showLoginModal()" class="w-full bg-gray-600 hover:bg-gray-700 text-white py-3 px-4 rounded-lg font-semibold transition duration-300 transform hover:scale-105">
                            <i class="fas fa-user-plus mr-2"></i>Get Started Free
                        </button>
                    </div>
                </div>
                
                <!-- Premium Plan -->
                <div class="bg-white border-2 border-green-500 rounded-xl p-8 pricing-card relative transform scale-105">
                    <div class="absolute -top-4 left-1/2 transform -translate-x-1/2">
                        <span class="bg-green-500 text-white px-4 py-2 rounded-full text-sm font-semibold">Most Popular</span>
                    </div>
                    <div class="text-center">
                        <h3 class="text-2xl font-semibold text-gray-900 mb-4">Premium</h3>
                        <div class="text-4xl font-bold text-green-600 mb-2">
                            $9.99
                            <span class="text-lg font-normal text-gray-600">/month</span>
                        </div>
                        <p class="text-gray-600 mb-6">For serious MMJ patients</p>
                        
                        <ul class="text-left space-y-3 mb-8">
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-3"></i>
                                <span class="text-gray-600">Everything in Basic</span>
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-3"></i>
                                <span class="text-gray-600">Unlimited transaction history</span>
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-3"></i>
                                <span class="text-gray-600">Advanced analytics & reports</span>
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-3"></i>
                                <span class="text-gray-600">Export for tax preparation</span>
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-3"></i>
                                <span class="text-gray-600">Email notifications</span>
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-3"></i>
                                <span class="text-gray-600">Priority customer support</span>
                            </li>
                        </ul>
                        
                        <button onclick="subscribeToplan('premium')" class="w-full bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-lg font-semibold transition duration-300 transform hover:scale-105">
                            <i class="fas fa-crown mr-2"></i>Subscribe to Premium
                        </button>
                    </div>
                </div>
                
                <!-- Pro Plan -->
                <div class="bg-white border-2 border-gray-200 rounded-xl p-8 pricing-card relative">
                    <div class="text-center">
                        <h3 class="text-2xl font-semibold text-gray-900 mb-4">Pro</h3>
                        <div class="text-4xl font-bold text-purple-600 mb-2">
                            $19.99
                            <span class="text-lg font-normal text-gray-600">/month</span>
                        </div>
                        <p class="text-gray-600 mb-6">For caregivers & businesses</p>
                        
                        <ul class="text-left space-y-3 mb-8">
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-3"></i>
                                <span class="text-gray-600">Everything in Premium</span>
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-3"></i>
                                <span class="text-gray-600">Multiple card management</span>
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-3"></i>
                                <span class="text-gray-600">Advanced tax preparation tools</span>
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-3"></i>
                                <span class="text-gray-600">API access for integrations</span>
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-3"></i>
                                <span class="text-gray-600">White-label options</span>
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-3"></i>
                                <span class="text-gray-600">Dedicated account manager</span>
                            </li>
                        </ul>
                        
                        <button onclick="subscribeToplan('pro')" class="w-full bg-purple-600 hover:bg-purple-700 text-white py-3 px-4 rounded-lg font-semibold transition duration-300 transform hover:scale-105">
                            <i class="fas fa-rocket mr-2"></i>Subscribe to Pro
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Money Back Guarantee -->
            <div class="text-center mt-12">
                <div class="inline-flex items-center bg-green-50 text-green-700 px-6 py-3 rounded-full">
                    <i class="fas fa-shield-alt mr-2"></i>
                    <span class="font-medium">30-day money-back guarantee</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Newsletter Section -->
    <section class="py-16 bg-gray-900 text-white">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h2 class="text-3xl font-bold mb-4">Stay Updated</h2>
            <p class="text-xl text-gray-300 mb-8">
                Get the latest updates on South Dakota MMJ regulations and new features
            </p>
            
            <form action="https://formspree.io/f/YOUR_FORM_ID" method="post" class="flex flex-col sm:flex-row gap-4 max-w-md mx-auto">
                <input type="email" name="EMAIL" placeholder="Enter your email" required
                       class="flex-1 px-4 py-3 rounded-lg text-gray-900 focus:ring-2 focus:ring-green-500 focus:outline-none transition duration-300">
                <button type="submit" class="bg-green-600 hover:bg-green-700 px-6 py-3 rounded-lg font-semibold transition duration-300 transform hover:scale-105">
                    <i class="fas fa-paper-plane mr-2"></i>Subscribe
                </button>
            </form>
            
            <p class="text-sm text-gray-400 mt-4">
                We respect your privacy. Unsubscribe at any time.
            </p>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="py-20 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
                    Get in Touch
                </h2>
                <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                    Have questions? Need support? We're here to help South Dakota MMJ patients
                </p>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
                <!-- Contact Form -->
                <div class="bg-gray-50 rounded-xl p-8">
                    <h3 class="text-2xl font-semibold text-gray-900 mb-6">Send us a message</h3>
                    
                    <form action="https://formspree.io/f/YOUR_CONTACT_FORM_ID" method="POST" class="space-y-6">
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">First Name</label>
                                <input type="text" name="first_name" required
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition duration-300">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Last Name</label>
                                <input type="text" name="last_name" required
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition duration-300">
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                            <input type="email" name="email" required
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition duration-300">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Subject</label>
                            <select name="subject" required
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition duration-300">
                                <option value="">Select a topic</option>
                                <option value="general">General Question</option>
                                <option value="support">Technical Support</option>
                                <option value="billing">Billing Question</option>
                                <option value="partnership">Dispensary Partnership</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Message</label>
                            <textarea name="message" rows="5" required
                                      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition duration-300"></textarea>
                        </div>
                        
                        <button type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-lg font-semibold transition duration-300 transform hover:scale-105">
                            <i class="fas fa-paper-plane mr-2"></i>Send Message
                        </button>
                    </form>
                </div>
                
                <!-- Contact Info -->
                <div class="space-y-8">
                    <div>
                        <h3 class="text-2xl font-semibold text-gray-900 mb-6">Contact Information</h3>
                        
                        <div class="space-y-6">
                            <div class="flex items-start">
                                <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mr-4">
                                    <i class="fas fa-envelope text-green-600"></i>
                                </div>
                                <div>
                                    <h4 class="text-lg font-semibold text-gray-900">Email</h4>
                                    <p class="text-gray-600"><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="d5bcbbb3ba95a6b1b8b8bfa1a7b4b6beb0a7fbb6bab8">[email&#160;protected]</a></p>
                                    <p class="text-gray-600"><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="8ffcfaffffe0fdfbcffcebe2e2e5fbfdeeece4eafda1ece0e2">[email&#160;protected]</a></p>
                                </div>
                            </div>
                            
                            <div class="flex items-start">
                                <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mr-4">
                                    <i class="fas fa-phone text-blue-600"></i>
                                </div>
                                <div>
                                    <h4 class="text-lg font-semibold text-gray-900">Phone</h4>
                                    <p class="text-gray-600">(605) 555-MMJT</p>
                                    <p class="text-sm text-gray-500">Mon-Fri 9AM-6PM CST</p>
                                </div>
                            </div>
                            
                            <div class="flex items-start">
                                <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mr-4">
                                    <i class="fas fa-map-marker-alt text-purple-600"></i>
                                </div>
                                <div>
                                    <h4 class="text-lg font-semibold text-gray-900">Address</h4>
                                    <p class="text-gray-600">Pierre, SD 57501</p>
                                    <p class="text-sm text-gray-500">South Dakota</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <h4 class="text-lg font-semibold text-gray-900 mb-4">Follow Us</h4>
                        <div class="flex space-x-4">
                            <a href="#" class="w-10 h-10 bg-blue-600 text-white rounded-lg flex items-center justify-center hover:bg-blue-700 transition duration-300 transform hover:scale-110">
                                <i class="fab fa-facebook-f"></i>
                            </a>
                            <a href="#" class="w-10 h-10 bg-blue-400 text-white rounded-lg flex items-center justify-center hover:bg-blue-500 transition duration-300 transform hover:scale-110">
                                <i class="fab fa-twitter"></i>
                            </a>
                            <a href="#" class="w-10 h-10 bg-blue-700 text-white rounded-lg flex items-center justify-center hover:bg-blue-800 transition duration-300 transform hover:scale-110">
                                <i class="fab fa-linkedin-in"></i>
                            </a>
                            <a href="#" class="w-10 h-10 bg-pink-600 text-white rounded-lg flex items-center justify-center hover:bg-pink-700 transition duration-300 transform hover:scale-110">
                                <i class="fab fa-instagram"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div class="col-span-1 md:col-span-2">
                    <div class="flex items-center mb-4">
                        <span class="text-2xl font-bold text-green-400">üåø SD MMJ Tracker</span>
                    </div>
                    <p class="text-gray-400 mb-4 max-w-md">
                        Professional medical marijuana tracking system for South Dakota patients. 
                        Helping you stay compliant while managing your MMJ usage effectively.
                    </p>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white transition duration-300 transform hover:scale-110">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition duration-300 transform hover:scale-110">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition duration-300 transform hover:scale-110">
                            <i class="fab fa-linkedin-in"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition duration-300 transform hover:scale-110">
                            <i class="fab fa-instagram"></i>
                        </a>
                    </div>
                </div>
                
                <div>
                    <h3 class="text-lg font-semibold mb-4">Quick Links</h3>
                    <ul class="space-y-2">
                        <li><a href="#features" class="text-gray-400 hover:text-white transition duration-300">Features</a></li>
                        <li><a href="#pricing" class="text-gray-400 hover:text-white transition duration-300">Pricing</a></li>
                        <li><a href="#contact" class="text-gray-400 hover:text-white transition duration-300">Contact</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition duration-300">Support</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-lg font-semibold mb-4">Legal</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white transition duration-300">Privacy Policy</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition duration-300">Terms of Service</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition duration-300">HIPAA Compliance</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition duration-300">Cookie Policy</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="border-t border-gray-800 mt-8 pt-8 text-center">
                <p class="text-gray-400">
                    &copy; 2024 SD MMJ Tracker. All rights reserved. | 
                    This is a demonstration website with simulated data for testing purposes.
                </p>
            </div>
        </div>
    </footer>

    <!-- Login Modal -->
    <div id="login-modal" class="modal hide fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-xl p-8 max-w-md w-full mx-4 transform transition-all duration-300">
            <div class="text-center mb-6">
                <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-cannabis text-green-600 text-2xl"></i>
                </div>
                <h3 class="text-2xl font-semibold text-gray-900">MMJ Portal Login</h3>
                <p class="text-gray-600 mt-2">Access your medical marijuana tracking account</p>
            </div>
            
            <form id="login-form" class="space-y-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">MMJ Card Number</label>
                    <input type="text" id="card-number" placeholder="SD-MMJ-123456" required
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition duration-300">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Date of Birth</label>
                    <input type="date" id="date-of-birth" required
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition duration-300">
                </div>
                
                <div class="flex gap-4">
                    <button type="button" onclick="hideLoginModal()" class="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-3 px-4 rounded-lg font-semibold transition duration-300">
                        Cancel
                    </button>
                    <button type="submit" class="flex-1 bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-lg font-semibold transition duration-300">
                        <i class="fas fa-sign-in-alt mr-2"></i>Login
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
        // Enhanced Stripe Configuration with Error Handling
        let stripe;
        
        // Initialize Stripe with error handling
        try {
            // Replace YOUR_STRIPE_PUBLISHABLE_KEY with your actual Stripe publishable key
            stripe = Stripe('pk_live_51RZisNGDMWIMmq7VRKdR3mFv01DPtMJBPrgSke1GM8hNSXNdBsbmpKyNSKCSsNE6juqVF8WkEvgztUClWOLUMAzj00xSKOnEOF');
            updateDebugStatus('stripe-status', '‚úÖ Stripe loaded successfully');
        } catch (error) {
            console.error('Stripe initialization error:', error);
            updateDebugStatus('stripe-status', '‚ùå Stripe failed to load');
        }
        
        // Pricing Plans Configuration - Replace with your actual Price IDs
        const PRICING_PLANS = {
            basic: 'price_1RZjLnGDMWIMmq7VaWB4oSQm',
            premium: 'price_1RZjN1GDMWIMmq7VxwRkBq8E', 
            pro: 'price_1RZjO6GDMWIMmq7VkM5sSk3U'
        };

        // Global state management
        const appState = {
            isDebugMode: true,
            paymentInProgress: false,
            userLoggedIn: false
        };

        // Enhanced page load handler
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ SD MMJ Tracker initializing...');
            
            // Debug payment flow
            debugPaymentFlow();
            
            // Check for payment status in URL
            handlePaymentCallback();
            
            // Initialize all components
            initializeApp();
            
            console.log('‚úÖ SD MMJ Tracker initialized successfully');
        });

        function updateDebugStatus(elementId, message) {
            const element = document.getElementById(elementId);
            if (element) {
                element.textContent = message;
            }
        }

        function debugPaymentFlow() {
            console.log('=== SD MMJ Tracker Debug Info ===');
            console.log('Current URL:', window.location.href);
            console.log('Stripe loaded:', typeof stripe !== 'undefined');
            console.log('Pricing plans configured:', PRICING_PLANS);
            
            // Check URL parameters
            const urlParams = new URLSearchParams(window.location.search);
            console.log('URL Parameters:', Object.fromEntries(urlParams));
            
            updateDebugStatus('payments-status', '‚úÖ Payment system ready');
            console.log('=====================================');
        }

        function handlePaymentCallback() {
            const urlParams = new URLSearchParams(window.location.search);
            
            if (urlParams.get('success')) {
                console.log('‚úÖ Payment success detected');
                setTimeout(() => showPaymentSuccess(), 500);
                cleanupURL();
            }
            
            if (urlParams.get('canceled')) {
                console.log('‚ö†Ô∏è Payment canceled detected');
                setTimeout(() => showPaymentCanceled(), 500);
                cleanupURL();
            }
        }

        function initializeApp() {
            // Initialize forms
            initializeForms();
            
            // Initialize smooth scrolling
            initializeSmoothScrolling();
            
            // Initialize analytics tracking
            initializeAnalytics();
            
            // Auto-hide debug panel after 10 seconds
            if (appState.isDebugMode) {
                setTimeout(() => {
                    const debugPanel = document.getElementById('debug-panel');
                    if (debugPanel && !debugPanel.classList.contains('hidden')) {
                        debugPanel.style.opacity = '0.7';
                    }
                }, 10000);
            }
        }

        function initializeForms() {
            const demoForm = document.getElementById('demo-login-form');
            const loginForm = document.getElementById('login-form');
            
            if (demoForm) {
                demoForm.addEventListener('submit', handleDemoLogin);
            }
            
            if (loginForm) {
                loginForm.addEventListener('submit', handleLogin);
            }
        }

        function initializeSmoothScrolling() {
            const links = document.querySelectorAll('a[href^="#"]');
            links.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href').substring(1);
                    const targetElement = document.getElementById(targetId);
                    
                    if (targetElement) {
                        targetElement.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                        
                        // Close mobile menu if open
                        const mobileMenu = document.getElementById('mobile-menu');
                        if (mobileMenu && !mobileMenu.classList.contains('hidden')) {
                            mobileMenu.classList.add('hidden');
                        }
                    }
                });
            });
        }

        function initializeAnalytics() {
            // Track page view
            trackEvent('page_view', 'engagement', 'homepage');
            
            // Track pricing clicks
            document.addEventListener('click', function(e) {
                if (e.target.matches('button[onclick*="subscribeToplan"]')) {
                    const plan = e.target.getAttribute('onclick').match(/subscribeToplan\('([^']+)'\)/)[1];
                    trackEvent('pricing_click', 'conversion', plan);
                }
            });
        }

        // Enhanced subscription function with error handling
        async function subscribeToplan(planType) {
            if (appState.paymentInProgress) {
                console.log('Payment already in progress, ignoring click');
                return;
            }
            
            appState.paymentInProgress = true;
            
            try {
                const priceId = PRICING_PLANS[planType];
                
                // Validate configuration
                if (!stripe) {
                    throw new Error('Stripe not initialized. Please check your configuration.');
                }
                
                if (!priceId || priceId.startsWith('YOUR_')) {
                    showConfigurationError();
                    return;
                }
                
                // Show loading state
                const button = event.target;
                const originalText = button.innerHTML;
                button.innerHTML = '<div class="loading"></div> Processing...';
                button.disabled = true;
                
                console.log(`üõí Starting subscription process for ${planType} plan`);
                
                // Track the subscription attempt
                trackEvent('subscription_attempt', 'conversion', planType);
                
                // Redirect to Stripe Checkout
                const result = await stripe.redirectToCheckout({
                    lineItems: [{
                        price: priceId,
                        quantity: 1,
                    }],
                    mode: 'subscription',
                    successUrl: `${window.location.origin}${window.location.pathname}?success=true&plan=${planType}`,
                    cancelUrl: `${window.location.origin}${window.location.pathname}?canceled=true&plan=${planType}`,
                    customerEmail: null,
                    allowPromotionCodes: true,
                });
                
                if (result.error) {
                    throw new Error(result.error.message);
                }
                
            } catch (error) {
                console.error('Subscription error:', error);
                showPaymentError(error.message);
                
                // Track the error
                trackEvent('subscription_error', 'error', error.message);
                
            } finally {
                appState.paymentInProgress = false;
                
                // Reset button state
                const button = event.target;
                if (button) {
                    button.disabled = false;
                    if (planType === 'premium') {
                        button.innerHTML = '<i class="fas fa-crown mr-2"></i>Subscribe to Premium';
                    } else if (planType === 'pro') {
                        button.innerHTML = '<i class="fas fa-rocket mr-2"></i>Subscribe to Pro';
                    }
                }
            }
        }

        function showConfigurationError() {
            const errorMessage = `
                <div style="
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: linear-gradient(135deg, #EF4444, #DC2626);
                    color: white;
                    padding: 20px 24px;
                    border-radius: 12px;
                    box-shadow: 0 10px 25px rgba(239, 68, 68, 0.3);
                    z-index: 1000;
                    max-width: 400px;
                    animation: slideIn 0.5s ease-out;
                ">
                    <div style="display: flex; align-items: center; margin-bottom: 12px;">
                        <span style="font-size: 24px; margin-right: 12px;">‚öôÔ∏è</span>
                        <h3 style="margin: 0; font-size: 18px; font-weight: 600;">Configuration Required</h3>
                    </div>
                    <p style="margin: 0 0 16px 0; font-size: 14px; line-height: 1.5;">
                        Payment system needs to be configured with your Stripe keys. Please update the configuration.
                    </p>
                    <button onclick="this.parentElement.remove()" style="
                        background: rgba(255, 255, 255, 0.2);
                        border: 1px solid rgba(255, 255, 255, 0.3);
                        color: white;
                        padding: 8px 16px;
                        border-radius: 6px;
                        cursor: pointer;
                        font-size: 12px;
                    ">
                        Close
                    </button>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', errorMessage);
        }

        function showPaymentError(message) {
            const errorDiv = document.createElement('div');
            errorDiv.innerHTML = `
                <div style="
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: linear-gradient(135deg, #EF4444, #DC2626);
                    color: white;
                    padding: 20px 24px;
                    border-radius: 12px;
                    box-shadow: 0 10px 25px rgba(239, 68, 68, 0.3);
                    z-index: 1000;
                    max-width: 400px;
                    animation: slideIn 0.5s ease-out;
                ">
                    <div style="display: flex; align-items: center; margin-bottom: 12px;">
                        <span style="font-size: 24px; margin-right: 12px;">‚ùå</span>
                        <h3 style="margin: 0; font-size: 18px; font-weight: 600;">Payment Error</h3>
                    </div>
                    <p style="margin: 0 0 16px 0; font-size: 14px; line-height: 1.5;">
                        ${message}
                    </p>
                    <button onclick="this.parentElement.remove()" style="
                        background: rgba(255, 255, 255, 0.2);
                        border: 1px solid rgba(255, 255, 255, 0.3);
                        color: white;
                        padding: 8px 16px;
                        border-radius: 6px;
                        cursor: pointer;
                        font-size: 12px;
                    ">
                        Close
                    </button>
                </div>
            `;
            
            document.body.appendChild(errorDiv);
            
            setTimeout(() => {
                if (errorDiv.parentNode) {
                    errorDiv.remove();
                }
            }, 5000);
        }

        function showPaymentSuccess() {
            console.log('üéâ Showing payment success message');
            
            const successDiv = document.createElement('div');
            successDiv.id = 'payment-success-message';
            successDiv.className = 'payment-message';
            
            successDiv.innerHTML = `
                <div style="
                    background: linear-gradient(135deg, #10B981, #059669);
                    color: white;
                    padding: 20px 24px;
                    border-radius: 12px;
                    box-shadow: 0 10px 25px rgba(16, 185, 129, 0.3);
                    border: 1px solid rgba(255, 255, 255, 0.2);
                    animation: slideIn 0.5s ease-out;
                ">
                    <div style="display: flex; align-items: center; margin-bottom: 12px;">
                        <span style="font-size: 24px; margin-right: 12px;">üéâ</span>
                        <h3 style="margin: 0; font-size: 18px; font-weight: 600;">Payment Successful!</h3>
                    </div>
                    <p style="margin: 0 0 16px 0; font-size: 14px; line-height: 1.5; opacity: 0.95;">
                        Welcome to your premium plan! Your subscription is now active and all premium features are available.
                    </p>
                    <div style="display: flex; gap: 12px;">
                        <button onclick="closePaymentMessage('payment-success-message')" style="
                            background: rgba(255, 255, 255, 0.2);
                            border: 1px solid rgba(255, 255, 255, 0.3);
                            color: white;
                            padding: 8px 16px;
                            border-radius: 6px;
                            cursor: pointer;
                            font-size: 12px;
                            transition: background 0.2s;
                            flex: 1;
                        ">
                            Close
                        </button>
                        <button onclick="showLoginModal(); closePaymentMessage('payment-success-message');" style="
                            background: rgba(255, 255, 255, 0.9);
                            border: 1px solid rgba(255, 255, 255, 1);
                            color: #059669;
                            padding: 8px 16px;
                            border-radius: 6px;
                            cursor: pointer;
                            font-size: 12px;
                            font-weight: 500;
                            transition: background 0.2s;
                            flex: 1;
                        ">
                            Get Started
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(successDiv);
            
            // Auto-remove after 10 seconds
            setTimeout(() => {
                closePaymentMessage('payment-success-message');
            }, 10000);
            
            // Track successful payment
            trackEvent('payment_success', 'conversion', 'subscription');
        }

        function showPaymentCanceled() {
            console.log('‚ö†Ô∏è Showing payment canceled message');
            
            const cancelDiv = document.createElement('div');
            cancelDiv.id = 'payment-cancel-message';
            cancelDiv.className = 'payment-message';
            
            cancelDiv.innerHTML = `
                <div style="
                    background: linear-gradient(135deg, #F59E0B, #D97706);
                    color: white;
                    padding: 20px 24px;
                    border-radius: 12px;
                    box-shadow: 0 10px 25px rgba(245, 158, 11, 0.3);
                    border: 1px solid rgba(255, 255, 255, 0.2);
                    animation: slideIn 0.5s ease-out;
                ">
                    <div style="display: flex; align-items: center; margin-bottom: 12px;">
                        <span style="font-size: 24px; margin-right: 12px;">‚ö†Ô∏è</span>
                        <h3 style="margin: 0; font-size: 18px; font-weight: 600;">Payment Canceled</h3>
                    </div>
                    <p style="margin: 0 0 16px 0; font-size: 14px; line-height: 1.5; opacity: 0.95;">
                        No worries! Your payment was canceled and you haven't been charged. You can try again anytime.
                    </p>
                    <div style="display: flex; gap: 12px;">
                        <button onclick="closePaymentMessage('payment-cancel-message')" style="
                            background: rgba(255, 255, 255, 0.2);
                            border: 1px solid rgba(255, 255, 255, 0.3);
                            color: white;
                            padding: 8px 16px;
                            border-radius: 6px;
                            cursor: pointer;
                            font-size: 12px;
                            transition: background 0.2s;
                            flex: 1;
                        ">
                            Close
                        </button>
                        <button onclick="scrollToPricing(); closePaymentMessage('payment-cancel-message');" style="
                            background: rgba(255, 255, 255, 0.9);
                            border: 1px solid rgba(255, 255, 255, 1);
                            color: #D97706;
                            padding: 8px 16px;
                            border-radius: 6px;
                            cursor: pointer;
                            font-size: 12px;
                            font-weight: 500;
                            transition: background 0.2s;
                            flex: 1;
                        ">
                            Try Again
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(cancelDiv);
            
            // Auto-remove after 8 seconds
            setTimeout(() => {
                closePaymentMessage('payment-cancel-message');
            }, 8000);
            
            // Track canceled payment
            trackEvent('payment_canceled', 'conversion', 'subscription');
        }

        function closePaymentMessage(messageId) {
            const messageDiv = document.getElementById(messageId);
            if (messageDiv) {
                messageDiv.firstElementChild.style.animation = 'slideOut 0.3s ease-in';
                setTimeout(() => {
                    if (messageDiv.parentNode) {
                        messageDiv.remove();
                    }
                }, 300);
            }
        }

        function cleanupURL() {
            setTimeout(() => {
                if (window.location.search) {
                    const cleanURL = window.location.protocol + "//" + 
                                   window.location.host + 
                                   window.location.pathname;
                    window.history.replaceState({}, document.title, cleanURL);
                    console.log('üßπ URL cleaned up');
                }
            }, 2000);
        }

        // Demo functionality
        function handleDemoLogin(e) {
            e.preventDefault();
            const cardNumber = document.getElementById('demo-card-number').value;
            const dob = document.getElementById('demo-dob').value;
            
            if (cardNumber && dob) {
                showDemoDashboard();
                trackEvent('demo_login', 'engagement', 'demo_access');
            }
        }

        function handleLogin(e) {
            e.preventDefault();
            const cardNumber = document.getElementById('card-number').value;
            const dob = document.getElementById('date-of-birth').value;
            
            if (cardNumber && dob) {
                hideLoginModal();
                showDemoDashboard();
                appState.userLoggedIn = true;
                trackEvent('login_attempt', 'engagement', 'modal_login');
            }
        }

        function showDemoDashboard() {
            const dashboard = document.getElementById('demo-dashboard');
            dashboard.classList.remove('hidden');
            
            // Smooth scroll to dashboard
            setTimeout(() => {
                dashboard.scrollIntoView({ 
                    behavior: 'smooth',
                    block: 'start'
                });
            }, 100);
            
            // Animate progress bars
            setTimeout(() => {
                const progressBars = dashboard.querySelectorAll('.allotment-progress > div');
                progressBars.forEach(bar => {
                    bar.style.transition = 'width 1s ease-out';
                });
            }, 500);
        }

        // Modal functions
        function showLoginModal() {
            const modal = document.getElementById('login-modal');
            modal.classList.remove('hide');
            modal.classList.add('show');
            
            // Focus on first input
            setTimeout(() => {
                const firstInput = modal.querySelector('input');
                if (firstInput) firstInput.focus();
            }, 300);
        }

        function hideLoginModal() {
            const modal = document.getElementById('login-modal');
            modal.classList.remove('show');
            modal.classList.add('hide');
        }

        // Navigation functions
        function toggleMobileMenu() {
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenu.classList.toggle('hidden');
        }

        function scrollToPricing() {
            const pricingSection = document.querySelector('#pricing');
            if (pricingSection) {
                pricingSection.scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'start' 
                });
            }
        }

        // Debug functions
        function testSuccessMessage() {
            console.log('üß™ Testing success message');
            showPaymentSuccess();
        }

        function testCancelMessage() {
            console.log('üß™ Testing cancel message');
            showPaymentCanceled();
        }

        function toggleDebugPanel() {
            const debugPanel = document.getElementById('debug-panel');
            if (debugPanel) {
                debugPanel.classList.toggle('hidden');
            }
        }

        // Analytics functions
        function trackEvent(action, category = 'engagement', label = '') {
            try {
                if (typeof gtag !== 'undefined') {
                    gtag('event', action, {
                        'event_category': category,
                        'event_label': label,
                        'custom_parameter': 'sd_mmj_tracker'
                    });
                }
                
                console.log(`üìä Analytics: ${action} (${category}) - ${label}`);
            } catch (error) {
                console.warn('Analytics tracking failed:', error);
            }
        }

        // Close modal when clicking outside
        document.addEventListener('click', function(e) {
            const modal = document.getElementById('login-modal');
            if (e.target === modal) {
                hideLoginModal();
            }
        });

        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                hideLoginModal();
            }
        });

        // Performance monitoring
        window.addEventListener('load', function() {
            const loadTime = performance.now();
            console.log(`‚ö° Page loaded in ${Math.round(loadTime)}ms`);
            trackEvent('page_load_time', 'performance', Math.round(loadTime).toString());
        });

        console.log('üåø SD MMJ Tracker loaded successfully!');
    </script>
<script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"rayId":"94f6e234ffb1a1cd","serverTiming":{"name":{"cfExtPri":true,"cfEdge":true,"cfOrigin":true,"cfL4":true,"cfSpeedBrain":true,"cfCacheStatus":true}},"version":"2025.6.2","token":"4edd5f8ec12a48cfa682ab8261b80a79"}' crossorigin="anonymous"></script>
</body>
</html>
    <script id="html_badge_script1">
        window.__genspark_remove_badge_link = "https://www.genspark.ai/api/html_badge/" +
            "remove_badge?token=To%2FBnjzloZ3UfQdcSaYfDi6dpWElMuLQUdVfXa6v2%2BCZvd5xVgJjlZr3ZzOVec8VvY33Y0JKHGU%2BTYBgPXBebY2kUwG%2F24DM4kTH0LL%2BWRh060Utx1Csj51BFnbHtSKqW1V%2BA3OGGf6Y08nHdSxzCWXKIhQ5mJHYmQpY2K0ZPJJ0PKRvXEAwgqp8j%2Bv%2BaTnhNx8qwfp9ZwPYi6oRVt0jJ7ChY%2FrRVz%2Fcuhbyt5i1OP%2Bw%2BMLylRwO376L2O%2FZFotTUuj55fKceqBbKGD0XEWA0hLhsU%2B0MKldL2yZVR8qrh%2F9PZdVAG4VAIyZwoin8qQCP4q%2Fq0eXa%2Bw7QW0Ukx6IdvVTs82bJjLWZMwoFGr5P9RMOHmIXhTfdUo%2FhGcNAt30PfN6NEtdZEql0Pio7xLBbpzvnGRWKKTpCI2pjbt0UjWDBq060SpIm8hLzJQF5d92zXojsYfuYdS0GmYXgL%2B3aMmsmNO7RVwusuH2ret7RVmAS7YcT1Y1tuwBHFgN73wln3tl8vY%2BhHFgMf1yCbqz7U1b0ue1%2BXhFBpAxeRCxez4%3D";
        window.__genspark_locale = "en-US";
        window.__genspark_token = "To/BnjzloZ3UfQdcSaYfDi6dpWElMuLQUdVfXa6v2+CZvd5xVgJjlZr3ZzOVec8VvY33Y0JKHGU+TYBgPXBebY2kUwG/24DM4kTH0LL+WRh060Utx1Csj51BFnbHtSKqW1V+A3OGGf6Y08nHdSxzCWXKIhQ5mJHYmQpY2K0ZPJJ0PKRvXEAwgqp8j+v+aTnhNx8qwfp9ZwPYi6oRVt0jJ7ChY/rRVz/cuhbyt5i1OP+w+MLylRwO376L2O/ZFotTUuj55fKceqBbKGD0XEWA0hLhsU+0MKldL2yZVR8qrh/9PZdVAG4VAIyZwoin8qQCP4q/q0eXa+w7QW0Ukx6IdvVTs82bJjLWZMwoFGr5P9RMOHmIXhTfdUo/hGcNAt30PfN6NEtdZEql0Pio7xLBbpzvnGRWKKTpCI2pjbt0UjWDBq060SpIm8hLzJQF5d92zXojsYfuYdS0GmYXgL+3aMmsmNO7RVwusuH2ret7RVmAS7YcT1Y1tuwBHFgN73wln3tl8vY+hHFgMf1yCbqz7U1b0ue1+XhFBpAxeRCxez4=";
    </script>
    
    <script id="html_notice_dialog_script" src="https://www.genspark.ai/notice_dialog.js"></script>
    
