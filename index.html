<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="South Dakota Medical Cannabis Patient Portal - HIPAA-compliant verification and allotment tracking system for medical cannabis patients.">
    <meta name="keywords" content="South Dakota, medical cannabis, patient portal, HIPAA compliant, allotment tracking">
    <meta name="author" content="SD MMJ Tracker">

    <!-- Open Graph Tags -->
    <meta property="og:title" content="SD Medical Cannabis Patient Portal">
    <meta property="og:description" content="HIPAA-compliant patient verification and allotment tracking system">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.sdmmjtracker.com/">
    <meta property="og:image" content="https://www.sdmmjtracker.com/og-image.jpg">

    <!-- Canonical URL -->
    <link rel="canonical" href="https://www.sdmmjtracker.com/">

    <title>SD Medical Cannabis Patient Portal - HIPAA Compliant</title>

    <!-- Security Headers via Meta Tags -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline';">

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "SD Medical Cannabis Patient Portal",
        "description": "HIPAA-compliant patient verification and allotment tracking system",
        "url": "https://www.sdmmjtracker.com/",
        "applicationCategory": "HealthApplication",
        "operatingSystem": "Web Browser",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        }
    }
    </script>

    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        header {
            background: linear-gradient(135deg, #2c5530, #4a7c59);
            color: white;
            padding: 1rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
            flex-wrap: wrap;
        }

        .nav-links a {
            color: white;
            text-decoration: none;
            transition: opacity 0.3s;
        }

        .nav-links a:hover {
            opacity: 0.8;
        }

        main {
            padding: 2rem 0;
        }

        .hero {
            text-align: center;
            margin-bottom: 3rem;
            padding: 2rem;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: #2c5530;
        }

        .hero p {
            font-size: 1.2rem;
            color: #666;
            max-width: 600px;
            margin: 0 auto;
        }

        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .feature-card {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }

        .feature-card:hover {
            transform: translateY(-5px);
        }

        .feature-card h2 {
            color: #2c5530;
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }

        .dashboard {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }

        .dashboard h2 {
            color: #2c5530;
            margin-bottom: 1.5rem;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
            text-align: center;
            border-left: 4px solid #2c5530;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: #2c5530;
        }

        .stat-label {
            color: #666;
            margin-top: 0.5rem;
        }

        .form-section {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }

        .form-section h3 {
            color: #2c5530;
            margin-bottom: 1.5rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #333;
        }

        input, select, textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #2c5530;
            box-shadow: 0 0 0 2px rgba(44, 85, 48, 0.2);
        }

        .btn {
            background: #2c5530;
            color: white;
            padding: 0.75rem 2rem;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .btn:hover {
            background: #1e3a21;
        }

        .btn-secondary {
            background: #6c757d;
        }

        .btn-secondary:hover {
            background: #545b62;
        }

        .hipaa-notice {
            background: #e8f5e8;
            border: 1px solid #2c5530;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 2rem 0;
        }

        .hipaa-notice h3 {
            color: #2c5530;
            margin-bottom: 1rem;
        }

        .compliance-section {
            background: white;
            padding: 2rem;
            margin-bottom: 2rem;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        footer {
            background: #2c5530;
            color: white;
            padding: 3rem 0 1rem;
            margin-top: 3rem;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-section h4 {
            margin-bottom: 1rem;
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section ul li {
            margin-bottom: 0.5rem;
        }

        .footer-section a {
            color: white;
            text-decoration: none;
            transition: opacity 0.3s;
        }

        .footer-section a:hover {
            opacity: 0.8;
        }

        .footer-bottom {
            border-top: 1px solid #4a7c59;
            padding-top: 1rem;
            text-align: center;
            opacity: 0.8;
        }

        @media (max-width: 768px) {
            .nav-links {
                flex-direction: column;
                gap: 1rem;
            }

            .hero h1 {
                font-size: 2rem;
            }

            .stats {
                grid-template-columns: 1fr;
            }

            .features {
                grid-template-columns: 1fr;
            }
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background-color: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            margin: 1rem 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #28a745, #20c997);
            width: 52%;
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <header>
        <nav class="container">
            <div class="logo">SD MMJ Tracker</div>
            <ul class="nav-links">
                <li><a href="#dashboard">Dashboard</a></li>
                <li><a href="#verification">Verification</a></li>
                <li><a href="#dispensaries">Dispensaries</a></li>
                <li><a href="#compliance">Compliance</a></li>
                <li><a href="#partnership">Partnership</a></li>
                <li><a href="#legal">Legal</a></li>
            </ul>
        </nav>
    </header>

    <main class="container">
        <section class="hero">
            <h1>South Dakota Medical Cannabis Patient Portal</h1>
            <p>HIPAA-Compliant Patient Verification & Allotment Tracking System</p>
        </section>

        <div class="hipaa-notice">
            <h3>🔒 HIPAA Compliance Notice</h3>
            <p>This system is designed to protect your Protected Health Information (PHI) in accordance with HIPAA regulations. All data transmission is encrypted, and your medical information is kept strictly confidential. By using this system, you acknowledge that you have read and understand our <a href="#privacy-policy">Privacy Policy</a> and <a href="#hipaa-notice">HIPAA Notice of Privacy Practices</a>.</p>
        </div>

        <section id="dashboard" class="dashboard">
            <h2>Patient Dashboard</h2>
            <div class="stats">
                <div class="stat-card">
                    <div class="stat-number">1.2 oz</div>
                    <div class="stat-label">Remaining Allotment</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">12</div>
                    <div class="stat-label">Days Until Reset</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">$324.50</div>
                    <div class="stat-label">Total Spent (Month)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">Oct 28</div>
                    <div class="stat-label">Last Purchase</div>
                </div>
            </div>

            <h3>Monthly Allotment Usage</h3>
            <div class="progress-bar" role="progressbar" aria-valuenow="52" aria-valuemin="0" aria-valuemax="100" aria-label="Monthly allotment usage: 52% used">
                <div class="progress-fill"></div>
            </div>
            <p>1.3 oz used of 2.5 oz monthly limit (52%)</p>
        </section>

        <section id="verification" class="form-section">
            <h3>Patient Verification System</h3>
            <p>Real-time verification with South Dakota Medical Cannabis Registry</p>

            <form method="post" action="/verify-patient" id="patientVerificationForm">
                <input type="hidden" name="csrf_token" value="csrf_token_placeholder">

                <div class="form-group">
                    <label for="patient-id">Patient ID</label>
                    <input type="text" id="patient-id" name="patient_id" required autocomplete="off" aria-describedby="patient-id-help">
                    <small id="patient-id-help">Enter your state-issued medical cannabis patient ID number</small>
                </div>

                <div class="form-group">
                    <label for="patient-dob">Date of Birth</label>
                    <input type="date" id="patient-dob" name="date_of_birth" required autocomplete="off">
                </div>

                <button type="submit" class="btn">Verify Patient Status</button>
            </form>
        </section>

        <section class="features">
            <div class="feature-card">
                <h2>Instant Verification</h2>
                <p>Real-time connection to the official SD medical cannabis registry for immediate patient verification.</p>
            </div>

            <div class="feature-card">
                <h2>HIPAA Compliant</h2>
                <p>All patient data is encrypted and handled according to strict HIPAA privacy regulations.</p>
            </div>

            <div class="feature-card">
                <h2>Mobile Ready</h2>
                <p>Access your verification status from any device, anywhere, with our responsive design.</p>
            </div>
        </section>

        <section id="dispensaries" class="form-section">
            <h3>Licensed Dispensaries</h3>
            <p>Find authorized medical cannabis dispensaries in South Dakota</p>

            <div class="features">
                <div class="feature-card">
                    <h2>Genesis Farms</h2>
                    <p><strong>Location:</strong> Rapid City, SD<br>
                    <strong>Hours:</strong> Mon-Sat 9AM-8PM, Sun 10AM-6PM<br>
                    <strong>Phone:</strong> (605) 555-0123<br>
                    <strong>License:</strong> SD-DISP-001</p>
                    <p>✓ Delivery Available ✓ Online Ordering ✓ Senior Discounts</p>
                </div>

                <div class="feature-card">
                    <h2>Rapid Relief Cannabis</h2>
                    <p><strong>Location:</strong> Sioux Falls, SD<br>
                    <strong>Hours:</strong> Mon-Fri 8AM-9PM, Sat-Sun 10AM-7PM<br>
                    <strong>Phone:</strong> (605) 555-0456<br>
                    <strong>License:</strong> SD-DISP-002</p>
                    <p>✓ Drive-Thru ✓ Medical Consultations ✓ Veterans Discount</p>
                </div>

                <div class="feature-card">
                    <h2>Prairie Wellness</h2>
                    <p><strong>Location:</strong> Aberdeen, SD<br>
                    <strong>Hours:</strong> Tue-Sat 10AM-7PM<br>
                    <strong>Phone:</strong> (605) 555-0789<br>
                    <strong>License:</strong> SD-DISP-003</p>
                    <p>✓ Organic Products ✓ Educational Workshops ✓ First-Time Patient Discount</p>
                </div>
            </div>
        </section>

        <section id="compliance" class="compliance-section">
            <h2>Compliance & Regulations</h2>
            <p>Understanding South Dakota medical cannabis laws and compliance requirements</p>

            <div class="features">
                <div class="feature-card">
                    <h3>Patient Rights</h3>
                    <ul>
                        <li>Right to access medical cannabis with valid card</li>
                        <li>Privacy protection under HIPAA</li>
                        <li>Right to designate a caregiver</li>
                        <li>Protection from discrimination</li>
                    </ul>
                </div>

                <div class="feature-card">
                    <h3>Legal Limits</h3>
                    <ul>
                        <li>Maximum 2.5 oz per month for patients 21+</li>
                        <li>Edibles only for patients 18-20</li>
                        <li>Must carry valid registry card</li>
                        <li>No consumption in public places</li>
                    </ul>
                </div>

                <div class="feature-card">
                    <h3>Reporting Requirements</h3>
                    <ul>
                        <li>All purchases tracked in state system</li>
                        <li>Real-time inventory monitoring</li>
                        <li>Mandatory lab testing results</li>
                        <li>Seed-to-sale tracking</li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="partnership" class="form-section">
            <h3>Business Partnerships</h3>
            <p>Partner with SD MMJ Tracker for comprehensive compliance solutions</p>

            <form method="post" action="/partnership-inquiry" id="businessForm">
                <input type="hidden" name="csrf_token" value="csrf_token_placeholder">

                <div class="form-group">
                    <label for="business-name">Business Name</label>
                    <input type="text" id="business-name" name="business_name" required>
                </div>

                <div class="form-group">
                    <label for="contact-name">Contact Name</label>
                    <input type="text" id="contact-name" name="contact_name" required>
                </div>

                <div class="form-group">
                    <label for="contact-email">Email Address</label>
                    <input type="email" id="contact-email" name="email" required autocomplete="off">
                </div>

                <div class="form-group">
                    <label for="phone">Phone Number</label>
                    <input type="tel" id="phone" name="phone" required autocomplete="off">
                </div>

                <div class="form-group">
                    <label for="business-type">Business Type</label>
                    <select id="business-type" name="business_type" required>
                        <option value="">Select Business Type</option>
                        <option value="dispensary">Dispensary</option>
                        <option value="healthcare">Healthcare Provider</option>
                        <option value="testing">Testing Facility</option>
                        <option value="cultivation">Cultivation Facility</option>
                        <option value="other">Other</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="message">Message</label>
                    <textarea id="message" name="message" rows="4" placeholder="Tell us about your partnership needs..."></textarea>
                </div>

                <button type="submit" class="btn">Submit Inquiry</button>
            </form>
        </section>
    </main>

    <footer id="legal">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>Legal Compliance</h4>
                    <ul>
                        <li><a href="#privacy-policy">Privacy Policy</a></li>
                        <li><a href="#terms-of-service">Terms of Service</a></li>
                        <li><a href="#hipaa-notice">HIPAA Notice</a></li>
                        <li><a href="#accessibility">Accessibility Statement</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h4>Support</h4>
                    <ul>
                        <li><a href="#help">Help Center</a></li>
                        <li><a href="#contact">Contact Support</a></li>
                        <li><a href="#faq">FAQ</a></li>
                        <li><a href="#system-status">System Status</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h4>Resources</h4>
                    <ul>
                        <li><a href="#patient-guide">Patient Guide</a></li>
                        <li><a href="#provider-resources">Provider Resources</a></li>
                        <li><a href="#api-docs">API Documentation</a></li>
                        <li><a href="#security">Security Information</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h4>Contact Information</h4>
                    <p>Email: <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="a5d6d0d5d5cad7d1e5d6c1c8c8cfd1d7c4c6cec0d78bc6cac8">[email&#160;protected]</a><br>
                    Phone: 1-800-SD-CANNABIS<br>
                    Hours: Mon-Fri 8AM-6PM CST</p>
                </div>
            </div>

            <div class="footer-bottom">
                <p>&copy; 2024 SD MMJ Tracker. All rights reserved. HIPAA Compliant | SOC 2 Type II Certified</p>
            </div>
        </div>
    </footer>

    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
        // Enhanced form validation and security
        document.addEventListener('DOMContentLoaded', function() {
            // Add CSRF token to all forms
            const forms = document.querySelectorAll('form');
            forms.forEach(form => {
                const csrfToken = generateCSRFToken();
                const csrfInput = form.querySelector('input[name="csrf_token"]');
                if (csrfInput) {
                    csrfInput.value = csrfToken;
                }
            });

            // Form validation
            const patientForm = document.getElementById('patientVerificationForm');
            if (patientForm) {
                patientForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    validateAndSubmitPatientForm(this);
                });
            }

            const businessForm = document.getElementById('businessForm');
            if (businessForm) {
                businessForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    validateAndSubmitBusinessForm(this);
                });
            }

            // Accessibility enhancements
            addKeyboardNavigation();
            addScreenReaderSupport();
        });

        function generateCSRFToken() {
            // In production, this should be generated server-side
            return 'csrf_' + Math.random().toString(36).substr(2, 9);
        }

        function validateAndSubmitPatientForm(form) {
            const patientId = form.querySelector('#patient-id').value;
            const dob = form.querySelector('#patient-dob').value;

            if (!patientId || !dob) {
                alert('Please fill in all required fields.');
                return;
            }

            // Basic validation for patient ID format
            if (!/^[A-Z0-9]{8,12}$/.test(patientId)) {
                alert('Please enter a valid patient ID format.');
                return;
            }

            // Simulate form submission (in production, this would make an AJAX call)
            alert('Patient verification submitted. You will receive confirmation shortly.');
        }

        function validateAndSubmitBusinessForm(form) {
            const requiredFields = form.querySelectorAll('[required]');
            let isValid = true;

            requiredFields.forEach(field => {
                if (!field.value.trim()) {
                    field.classList.add('error');
                    isValid = false;
                } else {
                    field.classList.remove('error');
                }
            });

            if (!isValid) {
                alert('Please fill in all required fields.');
                return;
            }

            // Email validation
            const email = form.querySelector('#contact-email').value;
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                alert('Please enter a valid email address.');
                return;
            }

            // Simulate form submission
            alert('Partnership inquiry submitted successfully. We will contact you within 2 business days.');
        }

        function addKeyboardNavigation() {
            // Enhanced keyboard navigation for accessibility
            const focusableElements = document.querySelectorAll(
                'a[href], button, input, select, textarea, [tabindex]:not([tabindex="-1"])'
            );

            focusableElements.forEach(element => {
                element.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' && this.tagName === 'A') {
                        this.click();
                    }
                });
            });
        }

        function addScreenReaderSupport() {
            // Add ARIA labels and descriptions where needed
            const forms = document.querySelectorAll('form');
            forms.forEach(form => {
                form.setAttribute('role', 'form');
                form.setAttribute('aria-label', form.querySelector('h3')?.textContent || 'Form');
            });
        }

        // Performance monitoring
        window.addEventListener('load', function() {
            const loadTime = performance.now();
            if (loadTime > 3000) {
                console.warn('Page load time exceeded 3 seconds:', loadTime + 'ms');
            }
        });
    </script>
</body>
</html>